{
  "name": "{{ site.title }}",
  "short_name": "{{ site.title }}",
  "description": "{{ site.description }}",
  "display": "{{ site.manifest.display|default('standalone') }}",
  "start_url": "{{ site.manifest.start_url|default('/') }}",
  "orientation": "{{ site.manifest.orientation|default('portrait') }}",
  "background_color": "{{ site.manifest.background_color|default('#FFFFFF') }}",
  "theme_color": "{{ site.manifest.theme_color|default('#202020') }}",
  "lang": "{{ site.language|default('en') }}",
  "dir": "{{ site.manifest.dir|default('ltr') }}",
  "icons": [
  {%- for icon in site.manifest.icons ~%}
    {
      {%- for key, value in icon ~%}
      "{{ key }}": {% if key == 'src' %}"{{ asset(value)|url({canonical: false}) }}"{% else %}"{{ value }}"{% endif %}
      {%- if loop.length > 1 and not loop.last %},{% endif ~%}
      {%- endfor ~%}
    }{% if loop.length > 1 and not loop.last %},{% endif ~%}
  {%- endfor ~%}
  ]
  {%- if site.serviceworker.enabled|default(false) %},
  "serviceworker": {
    "src": "{{ site.serviceworker.file|default('serviceworker.js') }}",
    "scope": "/",
    "use_cache": false
  }
  {%- endif -%}
  {%- if site.manifest.shortcuts|default(false) and site.menus.main|length > 0 %},
  "shortcuts": [
  {%- for item in site.menus.main|sort_by_weight ~%}
    {
      "name": "{{ item.name }}",
      "short_name": "{{ item.name }}",
      "url": "{{ url(item.url) }}",
      "icons": [{ "src": "{{ asset(site.manifest.icons[0].src)|url({canonical: false}) }}", "sizes": "{{ site.manifest.icons[0].sizes }}" }]
    }{% if loop.length > 1 and not loop.last %},{% endif ~%}
  {%- endfor ~%}
  ]
  {%- endif ~%}
}
